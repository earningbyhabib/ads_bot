<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ad Reward System</title>
  <style>
      body {
          margin: 0;
          padding: 0;
          background-color: #121212;
          color: #fff;
          font-family: Arial, sans-serif;
          display: flex;
          justify-content: center;
          align-items: center;
          height: 100vh;
      }
      .container {
          text-align: center;
          background: #1f1f1f;
          padding: 20px;
          border-radius: 10px;
          box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
          width: 300px;
      }
      .container h1 {
          font-size: 20px;
          color: green;
          margin-bottom: 10px;
      }
      .developer {
          font-size: 12px;
          background-color: green;
          padding: 5px 10px;
          border-radius: 5px;
          margin-bottom: 15px;
          display: inline-block;
          cursor: pointer;
      }
      .user-info {
          margin: 10px 0;
      }
      .user-info p {
          font-size: 14px;
          margin: 5px 0;
      }
      .stats {
          margin: 10px 0;
      }
      .stats p {
          margin: 5px 0;
          font-size: 14px;
      }
      .progress-circle {
          width: 80px;
          height: 80px;
          border: 4px solid green;
          border-radius: 50%;
          display: flex;
          justify-content: center;
          align-items: center;
          margin: 10px auto;
      }
      .progress-circle span {
          font-size: 18px;
          font-weight: bold;
      }
      .buttons button {
          width: 90%;
          margin: 5px 0;
          padding: 10px;
          font-size: 14px;
          border: none;
          border-radius: 5px;
          color: white;
          background: green;
          cursor: pointer;
      }
      .buttons button:hover {
          background: darkorange;
      }
      /* Withdraw toggle button styling */
      #toggle-withdraw-btn {
          width: 90%;
          margin: 15px 0;
          padding: 10px;
          font-size: 14px;
          border: none;
          border-radius: 5px;
          color: white;
          background: green;
          cursor: pointer;
      }
      #toggle-withdraw-btn:hover {
          background: darkorange;
      }
      /* Withdraw section: প্রাথমিক অবস্থায় লুকানো থাকবে */
      .withdraw-section {
          display: none;
          margin-top: 20px;
          padding: 20px;
          background-color: #2a2a2a;
          border-radius: 10px;
          box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
          text-align: left;
      }
      .withdraw-section input,
      .withdraw-section select {
          width: 100%;
          padding: 12px;
          margin: 8px 0;
          border-radius: 5px;
          border: 2px solid #555;
          background-color: #333;
          color: #fff;
      }
      .withdraw-section input:focus,
      .withdraw-section select:focus {
          border-color: green;
          outline: none;
      }
      .withdraw-section button.withdraw-submit {
          background-color: green;
          width: 100%;
          padding: 12px;
          font-size: 16px;
          margin-top: 15px;
          border-radius: 5px;
          cursor: pointer;
      }
      .withdraw-section button.withdraw-submit:hover {
          background-color: #006400;
      }
      .withdraw-section button.close-withdraw {
          background: red;
          color: #fff;
          border: none;
          border-radius: 50%;
          float: right;
          width: 25px;
          height: 25px;
          cursor: pointer;
      }
      #withdraw-status {
          color: red;
          font-size: 14px;
          margin-top: 10px;
          clear: both;
      }
  </style>
  <link rel="me" href="https://t.me/earningbyhabib" />
  <meta name="google-adsense-platform-account" content="ca-host-pub-1556223355139109" />
  <meta name="google-adsense-platform-domain" content="blogspot.com" />
  <link rel="me" href="https:///profile/" />
  <meta name="google-adsense-platform-account" content="ca-host-pub-1556223355139109" />
  <meta name="google-adsense-platform-domain" content="blogspot.com" />
</head>
<body>
  <div class="container">
      <h1>Watch Ads and Earn Reward</h1>
      <div class="developer" onclick="window.location.href='https://t.me/HS_SIKDAR_BD'">
          Developer by Habib Sikdar
      </div>

      <!-- User Information -->
      <div class="user-info">
          <p>Welcome, <span id="user-name"></span></p>
      </div>

      <div class="stats">
          <p>Watched Ads: <span id="watched-ads">0</span></p>
          <p>Earned Points: <span id="earned-points">0</span></p>
      </div>
      <div class="progress-circle">
          <span id="ads-progress">0%</span>
      </div>
      <div class="buttons">
          <button id="watch-ad-btn" onclick="watchAd()">Watch Ad</button>
          <button id="auto-ad-btn" onclick="startAutoAds()">Auto Show Ads</button>
          <button id="stop-auto-btn" onclick="stopAutoAds()">Stop Auto Ads</button>
      </div>

      <!-- Withdraw Toggle Button (সর্বদা দৃশ্যমান) -->
      <button id="toggle-withdraw-btn" onclick="openWithdrawSection()">Withdraw</button>

      <!-- Withdraw Section (প্রাথমিক অবস্থায় লুকানো) -->
      <div class="withdraw-section" id="withdraw-section">
          <!-- Close button for withdraw section -->
          <button class="close-withdraw" onclick="closeWithdrawSection()">X</button>
          <h3 style="color: orange; margin-bottom: 15px;">Withdrawal Request</h3>
          <input type="number" id="withdraw-amount" placeholder="Enter Points to Withdraw" />
          <select id="payment-method">
              <option value="bkash">Bkash</option>
              <option value="nagad">Nagad</option>
              <option value="rocket">Manual</option>
          </select>
          <input type="text" id="withdraw-phone" placeholder="Enter Phone Number" />
          <button class="withdraw-submit" onclick="withdrawPoints()">Withdraw</button>
          <p id="withdraw-status"></p>
      </div>
  </div>

  <script src="//jagnaimsee.net/vignette.min.js" data-zone="8929853" data-sdk="show_8929853"></script>

  <script>
      const MIN_WITHDRAW_POINTS = 50;
      const ADMIN_USER_ID = 6140196943;
      const BOT_TOKEN = "7888384699:AAFJKRYes81cyZPyCgapO11mdotdi9W74YY";
      let watchedAdsCount = 0;
      let earnedPoints = 0.00;
      let autoAdInterval;

      // ব্যবহারকারীর নাম (প্রয়োজন অনুযায়ী পরিবর্তন করুন)
      const telegramUserName = "@earningbyhabib";
      document.getElementById("user-name").textContent = telegramUserName;

      // Auto Ads বাটনের প্রাথমিক অবস্থা
      document.getElementById('stop-auto-btn').disabled = true;

      // LocalStorage থেকে পূর্বের ডেটা লোড করা
      if (localStorage.getItem('watchedAdsCount')) {
          watchedAdsCount = parseInt(localStorage.getItem('watchedAdsCount'));
          earnedPoints = parseFloat(localStorage.getItem('earnedPoints'));
          document.getElementById('watched-ads').textContent = watchedAdsCount;
          document.getElementById('earned-points').textContent = earnedPoints.toFixed(2);
          updateProgressCircle();
      }

      // একটি ad দেখানোর ফাংশন ও স্ট্যাট আপডেট
      function watchAd() {
          if (typeof show_8929853 === 'function') {
              show_8929853().then(() => {
                  watchedAdsCount++;
                  document.getElementById('watched-ads').textContent = watchedAdsCount;
                  earnedPoints += 0.50;
                  document.getElementById('earned-points').textContent = earnedPoints.toFixed(2);
                  localStorage.setItem('watchedAdsCount', watchedAdsCount);
                  localStorage.setItem('earnedPoints', earnedPoints.toFixed(2));
                  updateProgressCircle();
              });
          } else {
              // Fallback: যদি show_8929853() পাওয়া না যায়
              watchedAdsCount++;
              document.getElementById('watched-ads').textContent = watchedAdsCount;
              earnedPoints += 0.50;
              document.getElementById('earned-points').textContent = earnedPoints.toFixed(2);
              localStorage.setItem('watchedAdsCount', watchedAdsCount);
              localStorage.setItem('earnedPoints', earnedPoints.toFixed(2));
              updateProgressCircle();
          }
      }

      // Progress circle আপডেট করার ফাংশন
      function updateProgressCircle() {
          const percentage = Math.min((watchedAdsCount / 10) * 100, 100);
          document.getElementById('ads-progress').textContent = `${percentage}%`;
      }

      // Auto Ads শুরু করার ফাংশন
      function startAutoAds() {
          autoAdInterval = setInterval(watchAd, 5000); // প্রতি ৫ সেকেন্ডে ad দেখাবে
          document.getElementById('auto-ad-btn').disabled = true;
          document.getElementById('stop-auto-btn').disabled = false;
      }

      // Auto Ads থামানোর ফাংশন
      function stopAutoAds() {
          clearInterval(autoAdInterval);
          document.getElementById('auto-ad-btn').disabled = false;
          document.getElementById('stop-auto-btn').disabled = true;
      }

      // Withdraw সেকশন ওপেন করার ফাংশন
      function openWithdrawSection() {
          document.getElementById('withdraw-section').style.display = "block";
      }

      // Withdraw সেকশন বন্ধ করার ফাংশন
      function closeWithdrawSection() {
          document.getElementById('withdraw-section').style.display = "none";
      }

      // Withdrawal Request হ্যান্ডেল করার ফাংশন
      function withdrawPoints() {
          const withdrawAmount = parseFloat(document.getElementById('withdraw-amount').value);
          const paymentMethod = document.getElementById('payment-method').value;
          const phoneNumber = document.getElementById('withdraw-phone').value;
          const statusEl = document.getElementById('withdraw-status');

          if (isNaN(withdrawAmount)) {
              statusEl.textContent = 'Please enter a valid withdrawal amount.';
              return;
          }

          if (withdrawAmount < MIN_WITHDRAW_POINTS) {
              statusEl.textContent = `Minimum withdrawal amount is ${MIN_WITHDRAW_POINTS} points.`;
              return;
          }

          if (withdrawAmount > earnedPoints) {
              statusEl.textContent = `Insufficient balance. You have ${earnedPoints.toFixed(2)} points.`;
              return;
          }

          // পয়েন্ট কেটে নেওয়া হচ্ছে
          earnedPoints -= withdrawAmount;
          document.getElementById('earned-points').textContent = earnedPoints.toFixed(2);
          localStorage.setItem('earnedPoints', earnedPoints.toFixed(2));

          // Withdrawal Request টেলিগ্রাম অ্যাডমিনকে পাঠানো হচ্ছে
          const message = `Withdrawal Request from ${telegramUserName}:\nAmount: ${withdrawAmount} points\nPayment Method: ${paymentMethod}\nPhone Number: ${phoneNumber}`;
          sendWithdrawRequestToAdmin(message);

          statusEl.textContent = 'Withdrawal request sent successfully!';

          // ইনপুট ফিল্ডগুলো খালি করা
          document.getElementById('withdraw-amount').value = '';
          document.getElementById('withdraw-phone').value = '';
      }

      // টেলিগ্রাম অ্যাডমিনকে Withdrawal Request পাঠানোর ফাংশন
      function sendWithdrawRequestToAdmin(message) {
          fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage?chat_id=${ADMIN_USER_ID}&text=${encodeURIComponent(message)}`)
              .then(response => response.json())
              .then(data => {
                  if (data.ok) {
                      console.log('Message sent to admin');
                  } else {
                      console.error('Failed to send message', data);
                  }
              })
              .catch(error => console.error('Error sending message:', error));
      }
  </script>
</body>
</html>
